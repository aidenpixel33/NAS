<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Spanish Practice — Flashcards & Quizzes</title>
<link href="https://fonts.googleapis.com/css2?family=Nokkel:wght@400;600&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#b8dbff;
    --card:#ffffffcc;
    --accent:#1e90ff;   /* medium blue */
    --accent-deep:#0d1f3c; /* deep blue */
    --muted:#555;
    --radius:50px; /* pill shape */
    font-family: 'Nokkel', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }

  *{box-sizing:border-box}
  html,body{
    height:100%;
    margin:0;
    background:linear-gradient(180deg,#b8dbff 0%, #d6ecff 60%);
    color:#061018;
    font-size:20px;
  }

  .container{max-width:1100px;margin:28px auto;padding:24px;}
  header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:18px}
  header h1{font-size:30px;margin:0}
  header .subtitle{color:var(--muted);font-size:16px}

  .app{display:grid;grid-template-columns:260px 1fr;gap:20px}
  nav{background:var(--card);padding:16px;border-radius:12px;min-height:420px}
  nav button{display:block;width:100%;padding:12px 16px;margin-bottom:8px;border:2px solid transparent;border-radius:50px;cursor:pointer; font-size:1em; transition:0.3s;}
  nav button.active{background:var(--accent);color:#fff;font-weight:600}
  main{background:var(--card);padding:20px;border-radius:14px;min-height:420px}
  .panel{display:none}
  .panel.active{display:block}
  .card{background:var(--card);padding:22px;border-radius:12px;box-shadow:0 6px 20px rgba(2,6,23,0.1)}
  input[type=text], textarea, select{background:#fff;border:2px solid var(--accent-deep);color:var(--accent-deep);padding:12px;border-radius:50px;width:100%;font-size:1.1em}
  .big{font-size:32px;font-weight:600}
  .muted{color:var(--muted);font-size:14px}

  .btn{
    padding:12px 18px;
    border-radius:50px;
    border:0;
    cursor:pointer;
    font-size:1em;
    transition:0.3s;
    margin-right:6px;
  }
  .btn.primary{background:var(--accent); color:#fff}
  .btn.primary:hover{opacity:0.9;}
  .btn.ghost{background:#fff; color:var(--accent-deep); border:2px solid var(--accent-deep);}
  .btn.ghost:hover{background:var(--accent-deep); color:#fff;}

  .center{display:flex;align-items:center;justify-content:center}
  .choices{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:12px}
  .choice{padding:12px;border-radius:50px;border:2px solid var(--accent-deep);cursor:pointer;background:#fff;color:var(--accent-deep); font-size:1.1em; transition:0.3s;}
  .choice.correct{border-color:#1effaa;background:#ddffef;color:#061018}
  .choice.wrong{border-color:#ff7171;background:#ffecec;color:#061018}
</style>
</head>
<body>
<div class="container">
  <header>
    <div>
      <h1>Spanish Practice</h1>
      <div class="subtitle">Flip + Check: Enter, New Words + Next: Shift</div>
    </div>
    <div class="muted">Built for practicing Spanish — open-source & offline</div>
  </header>

  <div class="app">
    <!-- NAV -->
    <nav class="card">
      <button class="active" data-panel="flash">Flashcards</button>
      <button data-panel="quiz">Quiz</button>
      <button data-panel="manage">Add / Manage Words</button>
      <hr>
      <button id="btn-import" class="btn ghost">Import Words</button>
      <button id="btn-export" class="btn ghost">Export Words</button>
    </nav>

    <!-- MAIN PANELS -->
    <main>
      <!-- FLASHCARDS -->
      <section id="flash" class="panel active">
        <div class="card center">
          <div id="card-word" class="big">—</div>
          <div style="display:flex;gap:8px;margin-top:12px">
            <button id="flip" class="btn primary">Flip</button>
            <button id="next-card" class="btn primary">Next</button>
          </div>
        </div>
      </section>

      <!-- QUIZ -->
      <section id="quiz" class="panel">
        <div class="card">
          <div id="quiz-word" class="big center">—</div>
          <div class="choices" id="q-choices"></div>
        </div>
      </section>

      <!-- MANAGE WORDS -->
      <section id="manage" class="panel">
        <div class="card">
          <input id="new-es" type="text" placeholder="Spanish" />
          <input id="new-en" type="text" placeholder="English" />
          <button id="add-word" class="btn primary">Add</button>
          <textarea id="quick-import" rows="5" placeholder="Paste words: hola, hello"></textarea>
          <button id="apply-quick" class="btn primary">Import Multiple</button>
          <div id="words-list" style="margin-top:12px;"></div>
        </div>
      </section>
    </main>
  </div>
</div>

<script>
let state={words:[], sessions:0};
const STORAGE_KEY='spanish_practice_v2';
function saveState(){ localStorage.setItem(STORAGE_KEY,JSON.stringify(state)); renderWords(); }
function loadState(){ const raw=localStorage.getItem(STORAGE_KEY); if(raw) try{ state=JSON.parse(raw);}catch(e){state={words:[],sessions:0};}}
loadState();

// NAV
document.querySelectorAll('nav button[data-panel]').forEach(b=>{
  b.addEventListener('click',()=>{
    document.querySelectorAll('nav button[data-panel]').forEach(x=>x.classList.remove('active'));
    b.classList.add('active');
    document.querySelectorAll('.panel').forEach(p=>p.classList.remove('active'));
    document.getElementById(b.dataset.panel).classList.add('active');
    if(b.dataset.panel==='quiz') renderQuiz();
  });
});

// FLASHCARDS
let flashIndex=0;
let flipped=false;
function renderFlash(){
  if(!state.words.length){ document.getElementById('card-word').innerText='—'; return; }
  const w=state.words[flashIndex%state.words.length];
  document.getElementById('card-word').innerText=flipped ? w.en : w.es;
}
document.getElementById('flip').addEventListener('click',()=>{ flipped=!flipped; renderFlash(); });
document.getElementById('next-card').addEventListener('click',()=>{ flashIndex++; flipped=false; renderFlash(); });

// MANAGE WORDS
function renderWords(){ 
  const list=document.getElementById('words-list'); list.innerHTML='';
  state.words.forEach((w,i)=>{ const div=document.createElement('div'); div.innerText=w.es+' → '+w.en; list.appendChild(div); });
  renderFlash();
}
document.getElementById('add-word').addEventListener('click',()=>{
  const es=document.getElementById('new-es').value.trim(), en=document.getElementById('new-en').value.trim(); 
  if(!es||!en) return;
  state.words.push({es,en}); saveState(); 
  document.getElementById('new-es').value=''; document.getElementById('new-en').value='';
});
document.getElementById('apply-quick').addEventListener('click',()=>{
  const lines=document.getElementById('quick-import').value.split('\n'); 
  lines.forEach(l=>{ const p=l.split(','); if(p.length>=2) state.words.push({es:p[0].trim(), en:p[1].trim()}); }); 
  saveState(); document.getElementById('quick-import').value='';
});

// Import/Export
document.getElementById('btn-export').addEventListener('click',()=>{
  const blob=new Blob([JSON.stringify(state.words,null,2)],{type:'application/json'}); const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='words.json'; a.click();
});
document.getElementById('btn-import').addEventListener('click',()=>{
  const file=document.createElement('input'); file.type='file'; file.accept='application/json'; 
  file.onchange=e=>{ const f=e.target.files[0]; if(!f)return; 
    const reader=new FileReader(); reader.onload=ev=>{ try{ const arr=JSON.parse(ev.target.result); if(Array.isArray(arr)) arr.forEach(w=>{ if(w.es && w.en) state.words.push(w); }); saveState();}catch(err){alert('Invalid JSON');} };
    reader.readAsText(f);
  }; file.click();
});

// QUIZ
function renderQuiz(){
  if(!state.words.length) return;
  const randIndex=Math.floor(Math.random()*state.words.length);
  const word=state.words[randIndex];
  document.getElementById('quiz-word').innerText=word.es;

  const choicesEl=document.getElementById('q-choices');
  choicesEl.innerHTML='';

  let options=[word.en];
  while(options.length<4){
    const randOpt=state.words[Math.floor(Math.random()*state.words.length)].en;
    if(!options.includes(randOpt)) options.push(randOpt);
  }
  options=options.sort(()=>Math.random()-0.5);
  options.forEach(opt=>{
    const btn=document.createElement('div');
    btn.className='choice';
    btn.innerText=opt;
    btn.onclick=()=>{
      document.querySelectorAll('.choice').forEach(c=>c.classList.remove('correct','wrong'));
      btn.classList.add(opt===word.en?'correct':'wrong');
      setTimeout(renderQuiz,800);
    }
    choicesEl.appendChild(btn);
  });
}

renderWords();

// Keyboard shortcuts
document.addEventListener('keydown',e=>{
  if(e.key==='Enter'){ if(document.getElementById('flash').classList.contains('active')) document.getElementById('flip').click(); }
  if(e.key==='Shift'){ if(document.getElementById('flash').classList.contains('active')) document.getElementById('next-card').click(); }
});
</script>
</body>
</html>
